KISSY.add("malldetail/sku/focusVideo",function(e,t,a){var i,n,o=function(e){i=e,n=e.el,codeTrack("mod.focusVideo.init","view.metaLeft.init"),r(),l(),d()},r=function(){t.append(t.create('<i class="tm-video-play J_playVideo">&#xf0013;</i>'),n),t.append(t.create('<i class="tm-video-stop J_stopVideo"><b>&#xe60a;</b><s>&#xe60b;</s></i>'),n)},l=function(){a.on(".J_playVideo","click",function(e){codeTrack("mod.focusVideo.click","mod.focusVideo.init"),s()}),a.on(".J_stopVideo","click",function(){c()})},s=function(){i.onPlay&&i.onPlay();var a,o=t.width(n),r=t.height(n),l=o+"x"+r,s=/(\/\/cloud\.video\.taobao\.com\/play\/u\/\d+\/p\/\d+\/e\/)\d+(\/t\/)\d+(.+)swf/,c=i.videoUrl.replace(s,"$16$21$3mp4"),d=i.videoId;c.indexOf(".mp4")>0?(a='<div class="tm-video-box" style="height:'+r+"px;width:"+o+'px"></div>',t.append(t.create(a),n),e.use("malldetail/other/videox",function(e,t){t.getVideox(function(e){var t=window.location.hostname,a={};t.indexOf("yao.95095.com")>-1&&(a={"prefix":"api","mainDomain":"yao.95095.com"}),t.indexOf("liangxinyao.com")>-1&&(a={"prefix":"api","mainDomain":"liangxinyao.com"}),~location.search.indexOf("debug=true&wapa=true")&&(a.subDomain="wapa");new e({"mtopConfig":a,"container":".tm-video-box","poster":i.videoPic+"_600x600.jpg","from":"malldetail","url":c,"videoId":d,"controls":!0,"volumeControls":!0,"autoplay":!0,"loop":!0,"muted":!0,"noFullscreen":navigator.userAgent.indexOf("MSIE")>=0})})}),codeTrack("mod.focusVideo.videox","mod.focusVideo.auto")):("360x360"!=l&&"460x460"!=l&&(l="460x460"),a='<div class="tm-video-box" style="background: url('+i.videoPic+"_"+l+'.jpg) center center no-repeat #fff"><object name="playerObject" id="playerObject" width="'+o+'" height="'+r+'" data="'+i.videoUrl+'" type="application/x-shockwave-flash"><param name="allowfullscreen" value="false"><param name="allowscriptaccess" value="never"><param name="bgcolor" value="#ffffff"><param name="wmode" value="transparent"><param name="quality" value="high"><param name="movie" value="'+i.videoUrl+'"><embed src="'+i.videoUrl+'" width="'+o+'" height="'+r+'" quality="high" pluginspage="//www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" wmode="transparent" menu="false"></embed></object></div>',t.append(t.create(a),n),codeTrack("mod.focusVideo.flash","mod.focusVideo.auto")),t.hide(".tm-video-play"),t.show(".tm-video-stop")},c=function(){t.get(".tm-video-box")&&(t.remove(".tm-video-box"),t.show(".tm-video-play"),t.hide(".tm-video-stop"))},d=function(){codeTrack("mod.focusVideo.auto","mod.focusVideo.init"),s()};return{"init":o,"stopVideo":c}},{"requires":["dom","event"]});